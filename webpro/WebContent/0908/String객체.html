<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<script>
   function proc1() {
      // 입력 - 110326-1234567
      code = prompt("주민번호 입력", "110326-3456789");
      
      // 값 추출 --> String 문자열로 리턴한다.
      yy = code.substring(0,2); // "11" 0번째에서 2번째인덱스까지==> substr(0,2)  slice(0,2)
      mm = code.slice(2,4);       // "03" 2번째에서 4번째인덱스까지==> substr(2,2)  slice(2,4)
      dd = code.substr(4,2);    // "26" 4번째인덱스부터 2개==> substr(4,2)   slice(4,6)
      gg = code.charAt(6); // "3" 7번째인덱스 하나만 ==> substr(7,1)  substring(7,8)  slice(7,8)
      console.log(yy, mm, dd, gg);
      // 비교 - 1900년대인지 2000년대인지, 남자인지 여자인지
      if(gg == "1" || gg == "2") by = "19";
      else if(gg == "3" || gg == "4") by ="20";
      // 태어난 연도
      year = by + yy;
      console.log(year);
      
      // 성별
      if(gg == "1" || gg == "3") gender = "남자";
      else if(gg == "2" || gg == "4") gender = "여자";
      console.log(gender);
      
      
      // 현재 연도 구하기
      today = new Date();
      
      // 나이 구하기 = 현재 연도 - 생년
      age = today.getFullYear() - year;   //   2022 - "1911"    2022 + "1911"
         //--> 더하기만 연산이 안 됨. 문자열로 받아서 parseInt 해 줘야 함.
      
      
      // 출력 내용 작성
      str = "주민번호 : " + code.slice(0, 6) + "-" + "******<br>";
      str += `생년월일 : ${year}년 ${mm}월 ${dd}일 <br>`;
      str += `성별 : ${gender} <br>`;
      str += `나이 : ${age}`;
      
      document.getElementById('result1').innerHTML = str;
      
   }
   function proc2() {
      // 입력 - 110326-1234567
      code = prompt("주민번호 입력", "110326-3456789");
      
      // "110326-3456789"에서 -를 제거
      // rcode : 하이픈 제거용ㅋㅋ
      rcode = code.replace("-", "");
      
      number = "234567892345";
      
      hap = 0;
      
      for(i = 0; i < number.length; i++) {
         hap += rcode.substr(i, 1) * number.substr(i, 1);
      }
      
      aa = 11 - hap % 11   //==> 1에서 11까지 나옴.
      
//      if(aa == 10) aa = 0;
//      if(aa == 11) aa = 1;  // aa : 0 ~ 9까지 남아있음.
      // 그냥 아래처럼 쓰면 된당.
      aa = aa % 10;
      
      if(rcode.charAt(12) == aa)
         res = "진짜예요.";
      else
         res = "가짜예요.";
      
      
      // 출력 내용
      str = "주민번호 : " + code.slice(0, 6) + "-" + "******<br>";
      str += res;
      
      document.getElementById('result2').innerHTML = str;
      
      
      
      
      
      
      
      
      
      
      
      
      
      
   }
</script>


</head>
<body>


<div>
   <h3>
   prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를 출력하는 프로그램을 작성하시오.<br>
   예) 주민등록번호를 110326-4432618로 입력 받은 경우<br>
   생일 : 2011년 3월 26일<br>
   성별 : 여자  <br>
   나이 : 12   <br>
   </h3>
   <input type="button" value="확인" onclick="proc1()">
   <div id="result1"></div>
</div>

<div>
   <h3>
   주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.(ABCDEF-GHIJKLM)<br>
   A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
   1번의 합을 11로 나눈 나머지를 구한다.<br>
   11에서 2번의 결과를 뺀다.<br>
   3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
   4번의 결과와 M자리의 값이 같으면 맞는 번호이다.<br>
   </h3>
   <input type="button" value="확인" onclick="proc2()">
   <div id="result2"></div>
</div>

</body>
</html>